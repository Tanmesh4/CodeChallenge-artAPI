{"ast":null,"code":"async function getTiles(level) {\n  console.log(\"in gettiles\" + level);\n  const tilesResponse = await fetch(`https://www.rijksmuseum.nl/api/en/collection/SK-C-5/tiles/z${level}?key=2esrTh6M`);\n  const tilesJson = await tilesResponse.json();\n  const tiles = [];\n  for (const tile of tilesJson.tiles) {\n    tiles.push({\n      url: tile.url,\n      x: tile.x,\n      y: tile.y\n    });\n  }\n  return tiles;\n}\nexport default async function getImage(width, height) {\n  console.log(width, height);\n  const levelResponse = await fetch(`https://www.rijksmuseum.nl/api/en/collection/SK-C-5/tiles?width=${width}&height=${height}&key=2esrTh6M`);\n  const levelJson = await levelResponse.json();\n  console.log(levelJson.levels[0]);\n  const level = levelJson.levels[0];\n  const tiles = await getTiles(level.name);\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext('2d');\n  for (const tile of tiles) {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.src = tile.url;\n    await new Promise(resolve => img.onload = resolve);\n    ctx && ctx.drawImage(img, tile.x, tile.y);\n  }\n  const fullImage = new Image();\n  fullImage.src = canvas.toDataURL();\n  return fullImage;\n}","map":{"version":3,"names":["getTiles","level","console","log","tilesResponse","fetch","tilesJson","json","tiles","tile","push","url","x","y","getImage","width","height","levelResponse","levelJson","levels","name","canvas","document","createElement","ctx","getContext","img","Image","crossOrigin","src","Promise","resolve","onload","drawImage","fullImage","toDataURL"],"sources":["/Users/tanmeshshah/Desktop/try-fulltime-jobs/React-applications/Untitled/CodeChallenge-artAPI/tryArtAPI/tryArtAPI/src/try.tsx"],"sourcesContent":["import { log } from \"console\";\n\ninterface Tile {\n    url: string;\n    x: number;\n    y: number;\n  }\n  \n  async function getTiles(level: string): Promise<Tile[]> {\n    console.log(\"in gettiles\"+level);\n    \n    const tilesResponse = await fetch(`https://www.rijksmuseum.nl/api/en/collection/SK-C-5/tiles/z${level}?key=2esrTh6M`);\n    const tilesJson = await tilesResponse.json();\n    const tiles: Tile[] = [];\n    for (const tile of tilesJson.tiles) {\n      tiles.push({\n        url: tile.url,\n        x: tile.x,\n        y: tile.y\n      });\n    }\n    return tiles;\n  }\n  \n  export default async function getImage(width: number, height: number): Promise<HTMLImageElement> {\n    console.log(width,height);\n    const levelResponse = await fetch(`https://www.rijksmuseum.nl/api/en/collection/SK-C-5/tiles?width=${width}&height=${height}&key=2esrTh6M`);\n  \n    const levelJson = await levelResponse.json();\n    console.log(levelJson.levels[0]);\n    \n    const level = levelJson.levels[0];\n    const tiles = await getTiles(level.name);\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    for (const tile of tiles) {\n      const img = new Image();\n      img.crossOrigin = 'anonymous';\n      img.src = tile.url;\n      await new Promise(resolve => img.onload = resolve);\n      ctx && ctx.drawImage(img, tile.x, tile.y);\n    }\n    const fullImage = new Image();\n    fullImage.src = canvas.toDataURL();\n    return fullImage;\n  }\n  "],"mappings":"AAQE,eAAeA,QAAQA,CAACC,KAAa,EAAmB;EACtDC,OAAO,CAACC,GAAG,CAAC,aAAa,GAACF,KAAK,CAAC;EAEhC,MAAMG,aAAa,GAAG,MAAMC,KAAK,CAAE,8DAA6DJ,KAAM,eAAc,CAAC;EACrH,MAAMK,SAAS,GAAG,MAAMF,aAAa,CAACG,IAAI,CAAC,CAAC;EAC5C,MAAMC,KAAa,GAAG,EAAE;EACxB,KAAK,MAAMC,IAAI,IAAIH,SAAS,CAACE,KAAK,EAAE;IAClCA,KAAK,CAACE,IAAI,CAAC;MACTC,GAAG,EAAEF,IAAI,CAACE,GAAG;MACbC,CAAC,EAAEH,IAAI,CAACG,CAAC;MACTC,CAAC,EAAEJ,IAAI,CAACI;IACV,CAAC,CAAC;EACJ;EACA,OAAOL,KAAK;AACd;AAEA,eAAe,eAAeM,QAAQA,CAACC,KAAa,EAAEC,MAAc,EAA6B;EAC/Fd,OAAO,CAACC,GAAG,CAACY,KAAK,EAACC,MAAM,CAAC;EACzB,MAAMC,aAAa,GAAG,MAAMZ,KAAK,CAAE,mEAAkEU,KAAM,WAAUC,MAAO,eAAc,CAAC;EAE3I,MAAME,SAAS,GAAG,MAAMD,aAAa,CAACV,IAAI,CAAC,CAAC;EAC5CL,OAAO,CAACC,GAAG,CAACe,SAAS,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;EAEhC,MAAMlB,KAAK,GAAGiB,SAAS,CAACC,MAAM,CAAC,CAAC,CAAC;EACjC,MAAMX,KAAK,GAAG,MAAMR,QAAQ,CAACC,KAAK,CAACmB,IAAI,CAAC;EACxC,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EAC/CF,MAAM,CAACN,KAAK,GAAGA,KAAK;EACpBM,MAAM,CAACL,MAAM,GAAGA,MAAM;EACtB,MAAMQ,GAAG,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;EACnC,KAAK,MAAMhB,IAAI,IAAID,KAAK,EAAE;IACxB,MAAMkB,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;IACvBD,GAAG,CAACE,WAAW,GAAG,WAAW;IAC7BF,GAAG,CAACG,GAAG,GAAGpB,IAAI,CAACE,GAAG;IAClB,MAAM,IAAImB,OAAO,CAACC,OAAO,IAAIL,GAAG,CAACM,MAAM,GAAGD,OAAO,CAAC;IAClDP,GAAG,IAAIA,GAAG,CAACS,SAAS,CAACP,GAAG,EAAEjB,IAAI,CAACG,CAAC,EAAEH,IAAI,CAACI,CAAC,CAAC;EAC3C;EACA,MAAMqB,SAAS,GAAG,IAAIP,KAAK,CAAC,CAAC;EAC7BO,SAAS,CAACL,GAAG,GAAGR,MAAM,CAACc,SAAS,CAAC,CAAC;EAClC,OAAOD,SAAS;AAClB"},"metadata":{},"sourceType":"module","externalDependencies":[]}